<div class="row" ng-init="getCurrency()">

  <div class="col-md-6">

    <uib-accordion close-others="false">
      <div uib-accordion-group class="panel-default" ng-init="status = {open: true}" is-open="status.open" style="background-color:#FFFFFF;" >

        <uib-accordion-heading>
          Currency Details
          <i class="pull-right fa" ng-class="{'fa-angle-down': status.open, 'fa-angle-right': !status.open}"></i>
        </uib-accordion-heading>

        <div class="col-md-4">
            <div class="ucsb"> Name</div>
            <h5>
                <div class="dont-break-out"> {{currencyDetails.name}} </div>
            </h5>
        </div>

        <div class="col-md-4">
            <div class="ucsb"> Issuer </div>
            <h5>
                <div class="dont-break-out"> <div compile="currencyDetails.accountRS|searchTerm">  </div>
            </h5>
        </div>

        <div class="col-md-4">
          <div class="ucsb"> Currency Id</div>
          <h5>
              <div compile="currencyDetails.currency|searchTerm"></div>
          </h5>
        </div>

        <div class="col-md-12">
            <hr/>
        </div>

        <div class="col-md-4">
          <div class="ucsb"> Last Price</div>
          <h5 style="color:black;">  {{lastTrade.rateTQT|shareToQuantiy:currencyDetails.decimals|quantToAmount|numericalString}}
              <small> XIN</small>
          </h5>
        </div>

        <div class="col-md-4">
            <div class="ucsb"> Exchanges </div>
            <h5>
                <div> {{currencyDetails.numberOfExchanges}}  </div>
            </h5>
        </div>

        <div class="col-md-4">
            <div class="ucsb"> Transfers </div>
            <h5>
                <div>  {{currencyDetails.numberOfTransfers}} </div>
            </h5>
        </div>

        <div class="col-md-12">
            <hr/>
        </div>


        <div class="col-md-4">
            <div class="ucsb"> Supply </div>
            <h5>
                <div>  {{currencyDetails.currentSupply|quantityToShare:currencyDetails.decimals|numericalString}}  <small> UNITS </small> </div>
            </h5>
        </div>

        <div class="col-md-4">
          <div class="ucsb"> Ticker </div>
          <h5>
              <div> {{currencyDetails.code}} </div>
          </h5>
        </div>


        <div class="col-md-4">
          <div class="ucsb"> Details </div>
          <h5>

              <a ng-controller="CurrenciesMainCtrl"
                  ng-click="openCurrencyDetailsModal(currencyDetails.code)"> Details
              </a>

          </h5>
        </div>


      </div>
    </uib-accordion>



  </div>

  <div class="col-md-6">

    <uib-accordion close-others="false">
        <div uib-accordion-group class="panel-default" ng-init="status = {open: true}" is-open="status.open" style="background-color:#FFFFFF;" >

            <uib-accordion-heading>
                Currency Chart
                <i class="pull-right fa" ng-class="{'fa-angle-down': status.open, 'fa-angle-right': !status.open}"></i>
            </uib-accordion-heading>

            <nvd3 options="chartOptions" data="tradeData"></nvd3>

          </div>
    </uib-accordion>

  </div>

</div>

<br>

<div class="row">

    <div class="col-md-6">

        <button type="button" class="btn btn-success" ng-click="buyForm = !buyForm" style="width:100%;height:50px;border-radius: 0 !important;">
              <h4>  EXCHANGE XIN FOR  {{currencyDetails.code}}  </h4>
        </button>

        <div uib-collapse="buyForm" class="collapse" aria-expanded="false" aria-hidden="true" >

            <div class="panel panel-default" style="border-radius: 0 !important;">
                <div class="panel-body">

                  <div class="col-md-12">

                    <div class="pull-left">
                        <cc-auto-refresh-fn
                                refresh-fn="reloadAskOrders()"
                                refresh-interval="options.REFRESH_INTERVAL_MILLI_SECONDS"
                                refresh-paused="!options.AUTO_UPDATE"
                        >
                        </cc-auto-refresh-fn>


                        <button class="btn btn-default btn-xs pull-left " ng-click="reloadAskOrders()"
                         popover-placement="top" popover-trigger="'mouseenter'" uib-popover="Reload"><i
                                class="fa fa-refresh" aria-hidden="true"></i>
                        </button>
                        &nbsp;
                        <button type="button" class="btn btn-default btn-xs"
                                ng-controller="CurrenciesMainCtrl"
                                ng-click="openPublishExchangeOfferModal(currencyDetails.currency ,currencyDetails.decimals , currencyDetails.code )">
                                <i class="fa fa-plus-square" aria-hidden="true"></i> CREATE EXCHANGE OFFER
                        </button>

                        &nbsp;
                        <button type="button" class="btn btn-default btn-xs"
                                ng-controller="CurrenciesMainCtrl"
                                ng-click="openPublishExchangeBuyOfferModal(currencyDetails.currency ,currencyDetails.decimals , currencyDetails.code )">
                            <i class="fa fa-plus-square" aria-hidden="true"></i> CREATE BUY ONLY
                        </button>


                    </div>

                    <span class="pull-right">
                      <strong> <span ng-bind-html='accountBalance | balanceStyler' ng-controller="DashboardCtrl"
                      ng-init="getAccountAssetsAndBalances ()"></span> </strong>
                    </span>
                  </div>

                  <div class="col-md-12">
                      <hr/>
                  </div>

                  <form name="buyOrderForm">

                    <div class="col-md-4">
                      <div class="ucsb"> Price <small> XIN </small> </div>
                      <h5>
                        <input type="number" class="form-control" id="price"
                           placeholder="Price per Share" min=0
                           ng-model="buyOrderForm.price" validator="required">
                      </h5>
                    </div>

                    <div class="col-md-3">
                      <div class="ucsb"> Quantity </div>
                      <h5>
                        <input type="number" class="form-control" id="quantity"
                           placeholder="Quantity" min=0
                           ng-model="buyOrderForm.quantity" validator="required">
                      </h5>
                    </div>

                    <div class="col-md-4">
                      <div class="ucsb"> Total <small> XIN </small> </div>
                      <h5>
                        <input type="label" class="form-control" id="totalPrice"
                           placeholder="" min=0
                           ng-model="buyOrderForm.totalPrice" validator="required">
                      </h5>
                    </div>

                    <div class="col-md-1">
                      <div class="ucsb"> &nbsp; </div>
                      <h5>
                        <button class="btn btn-success pull-right" ng-click="placeOrderClick(buyOrderForm,'bid')"  ng-disabled="!enableBuy"> Buy </button>
                      </h5>
                    </div>

                  </form>

                  <div class="col-md-12">
                      <hr/>
                  </div>

                  <div class="col-md-12">

                    <div class="ucsb"> Offers to Sell {{currencyDetails.code}}   </div>

                    <div id="ask-orders-table" class="trade-orders-table">
                        <table datatable="" dt-options="dtAskOrdersOptions"
                               dt-columns="dtAskOrdersColumns" dt-instance="dtAskOrdersInstanceCallback"
                               class="table table-striped table-bordered">
                            <thead>

                            <tr>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th>Sum</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                        </table>

                    </div>

                  </div>

                  <div ng-show="!hasSellOffers()">
                    <div class="col-md-12">
                      <hr>
                      <i class="fa fa-info-circle" aria-hidden="true"></i>  &nbsp;
                      No open sell offers. You cannot buy this currency now, but you could publish an exchange offer instead, and wait for others to fill it.


                    </div>
                  </div>

                </div>
            </div>
        </div>

    </div>

    <div class="col-md-6">

        <button type="button" class="btn btn-danger " ng-click="sellForm = !sellForm" style="width:100%;height:50px;border-radius: 0 !important;">
              <h4>  EXCHANGE  {{currencyDetails.code}} FOR XIN </h4>
        </button>

        <div uib-collapse="sellForm" class="collapse" aria-expanded="false" aria-hidden="true" style="height:0px;">

            <div class="panel panel-default">
                <div class="panel-body">

                  <div class="col-md-12">

                    <div class="pull-left">
                        <cc-auto-refresh-fn
                                refresh-fn="reloadBidOrders()"
                                refresh-interval="options.REFRESH_INTERVAL_MILLI_SECONDS"
                                refresh-paused="!options.AUTO_UPDATE"
                        >
                        </cc-auto-refresh-fn>

                        <button class="btn btn-default btn-xs pull-left" ng-click="reloadBidOrders()"
                         popover-placement="top" popover-trigger="'mouseenter'" uib-popover="Reload" ><i
                                class="fa fa-refresh" aria-hidden="true"></i>
                        </button>

                        &nbsp;
                        <button type="button" class="btn btn-default btn-xs"
                                ng-controller="CurrenciesMainCtrl"
                                ng-click="openPublishExchangeOfferModal(currencyDetails.currency ,currencyDetails.decimals , currencyDetails.code )">
                                <i class="fa fa-plus-square" aria-hidden="true"></i> CREATE EXCHANGE OFFER
                        </button>

                        <button type="button" class="btn btn-default btn-xs"
                                ng-controller="CurrenciesMainCtrl"
                                ng-click="openPublishExchangeSellOfferModal(currencyDetails.currency ,currencyDetails.decimals , currencyDetails.code )">
                            <i class="fa fa-plus-square" aria-hidden="true"></i> CREATE SELL ONLY
                        </button>



                    </div>

                    <span class="pull-right">
                      <strong>

                            {{unconfirmedUnits |quantityToShare:currencyDetails.decimals | amountTKN }}

                      </strong>
                      <small>  {{currencyDetails.code}}   </small>
                    </span>

                  </div>

                  <div class="col-md-12">
                      <hr/>
                  </div>


                  <form name="askOrderForm">

                    <div class="col-md-4">
                      <div class="ucsb"> Price <small> XIN </small> </div>
                      <h5>
                        <input type="number" class="form-control" id="price"
                           placeholder="Price per Share" min=0
                           ng-model="askOrderForm.price" validator="required">
                      </h5>
                    </div>

                    <div class="col-md-3">
                      <div class="ucsb"> Quantity </div>
                      <h5>
                        <input type="number" class="form-control" id="quantity"
                           placeholder="Quantity" min=0
                           ng-model="askOrderForm.quantity" validator="required">
                      </h5>
                    </div>

                    <div class="col-md-3">
                      <div class="ucsb"> Total <small> XIN </small> </div>
                      <h5>
                        <input type="label" class="form-control" id="totalPrice"
                           placeholder="" min=0
                           ng-model="askOrderForm.totalPrice" validator="required">
                      </h5>
                    </div>

                    <div class="col-md-2">
                      <div class="ucsb"> &nbsp; </div>
                      <h5>
                        <button class="btn btn-danger" ng-click="placeOrderClick(askOrderForm,'ask')" ng-disabled="!enableSell"> Sell </button>
                      </h5>
                    </div>

                  </form>


                  <div class="col-md-12">
                      <hr/>
                  </div>

                  <div class="col-md-12">

                    <div class="ucsb"> Offers to Buy {{currencyDetails.code}} </div>
                    <div id="bid-orders-table" class="trade-orders-table">
                        <table datatable="" dt-options="dtBidOrdersOptions"
                               dt-columns="dtBidOrdersColumns" dt-instance="dtBidOrdersInstanceCallback"
                               class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th>Sum</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                        </table>

                    </div>

                  </div>

                  <div ng-show="!hasBuyOffers()">
                    <div class="col-md-12">
                      <hr>
                      <i class="fa fa-info-circle" aria-hidden="true"></i>  &nbsp;
                      No open buy offers. You cannot sell this currency now, but you could publish an exchange offer instead, and wait for others to fill it.



                    </div>
                  </div>

                </div>
            </div>
        </div>

    </div>

</div>

<br>

<div class="row">
    <div class="col-md-12">

      <cc-auto-refresh-fn
              refresh-fn="reloadLastTrades()"
              refresh-interval="options.REFRESH_INTERVAL_MILLI_SECONDS"
              refresh-paused="!options.AUTO_UPDATE"
      >
      </cc-auto-refresh-fn>

      <uib-accordion close-others="false">
          <div uib-accordion-group class="panel-default" ng-init="status = {open: false}" is-open="status.open" style="background-color:#FFFFFF;" >

              <uib-accordion-heading>
                  Last Exchanges
                  <i class="pull-right fa" ng-class="{'fa-angle-down': status.open, 'fa-angle-right': !status.open}"></i>
              </uib-accordion-heading>

              <button class="btn btn-default btn-xs pull-left" ng-click="reloadLastTrades()"
                popover-placement="top" popover-trigger="'mouseenter'" uib-popover="Reload" >
                <i class="fa fa-refresh" aria-hidden="true"></i>
              </button> <br>

              <table datatable="" dt-options="dtTradeOptions"
                     dt-columns="dtTradeColumns" dt-instance="dtLastTradesInstanceCallback"
                     class="table table-striped table-bordered">
                  <thead>
                  <tr>

                      <th>Order</th>
                      <th>Timestamp</th>
                      <th>Quantity</th>
                      <th>Price</th>
                      <th>Sum</th>
                      <th>Seller RS </th>
                      <th>Buyer RS</th>
                  </tr>
                  </thead>
              </table>

            </div>
      </uib-accordion>

    </div>
</div>
